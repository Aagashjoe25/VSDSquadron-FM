# Task 01: blue_led

## 1. Summary of verilog code functionality

In the top.v file from thesourceror8 github repository, I analyzed first the
inbuilt primitives of the ice40up5k processor and learnt about the bram,pll and i2c,spi primitives in this fpga.
I learnt the distinction between hard ip and soft ip, where the circuit is already designed and fabricated  in the fpga for ready use is hard ip and also understood that i have already worked on ip's when i used artix-7 fpga in which ip's available from vivado ip catalog

To make the led colour blue permanent as project goal, the SB_RGBA_DRV primitive is actually not required which is used for pwm modulation( of r,g and b) and also turning on/off of the r,g and b colours to produce a blend of new colours,
The clock divider circuits as a test_wire which produces 187.5 khz and first got confused its role in this project, the SB_HFOSC primitive is used to produce 4 clock signals by dividing the fpga's inbuilt crystal oscillator which produces 48Mhz
The first parameter DIV is used frm range 00 to 11 to get 48, 24, 12 and 6 Mhz respectively 
The defparam is used to modify the constant RGB_CURRENT which controls the brightness of led and also got to know 0 is forbidden and higher brightness dwars more current and damages the circuit


### Code Modifications by me:

I got idea of using the clock divider and test_wire to control the blue_led by passing it has the pwm signal to the rbg driver primitive.
I modified the clock divider to make a 1Hz clock to see the blinking and used the test_wire as blink_enable to enable blinking

I connected the blink_enable wire to io pin 3 and made logic in program suh thatif blink enable is high it should make the blue_led to blink.

I also made chnaged to the makefile, as the use of variables and makefile also is just new to me, i tried typing the constants name and the tools command as same in build 
Removed the terminal and cycle command because anyway my project is simple and doesnt requires to update my git files and terminal is used for embedded communication which is not possible in fpga

I added a new makefile command clean which is usefule to me because whenever i on the board it runs previous programs which is saved in the spram, so used the iceprog -e command to delete all memory so no need to see previous project outputs

---

## 2. Pin Mapping Details (PCF File)

The following signals were mapped using the Pin Constraint File (`constraint.pcf`) to the physical I/O pins of the FPGA Mini Board:

| Logic Signal Name | Physical Pin Name (Board) | 
| :--- | :--- | 
| `led_red` | **39** | 
| `led_blue` | **40** |
| `led_green` | **41** | 
| `clk_12Mhz` | **20** | 
| `blink enable` | **3** | 


---

## 3. Challenges Faced and Solutions Implemented
The first challenge was the tools setup in ubuntu which took me 2 days, first i thought to use apt-get and install the versions available in my ubuntu but to ensure less bugs and use the updated tools, i researched about building the tools from source ie the open source tools has their github repositries updated to install it directly
thus i made a detailed documentation of installing it in ubuntu 22.04(my version) and next step was to connect my board

It was quite easy to use the tools, as i already made my Makefile to run the commands and faced a simple problem
To flash the bistream, i used make flash which didnt work and struggled to find the error but found out that i should enable sudo because to access the usb port the tools needs sudo access
Thus changed my makefile and also enabled sudo for clean which also requires usb port access
I have used github before just to learn about markdown and but now only understood the actual meaing of .gitignore file
The yosys command is used to produce the netlists in json file from the top.v verilog filr
The next-pnr tool makes the ascii file which contains the actual placement and routing of netlist generated by the yosys
finally icetime check the timing violations and icepack produces the final binary file top.bin which is dumped to the fpga board by iceprog command
